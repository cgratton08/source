<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@page import="com.intact.rmtools.utils.Context" %>
<%@page import="com.intact.rmtools.utils.MenuAccess" %>

<div id="containerData">
<p class="containerDataTitle"><spring:message code="project.list.title"/></p>
<hr>

<spring:message code="project.list.name" var="prj_name"/>
<spring:message code="project.list.server" var="server_name"/>
<spring:message code="project.list.cluster" var="cluster_name"/>
<spring:message code='project.details.title' var="prjDetailsTitle"/>

<table id="projectList" class="table table-striped table-bordered filterable">
  <thead>
    <tr>
      <th scope="col" style="width: 25px;" class="no-sort"><spring:message code="global.edit"/></th>
      <th scope="col" style="width: 25px;" class="no-sort"><spring:message code="global.delete"/></th>
      <th scope="col"><input type="text" placeholder="${prj_name}"></th>
      <th scope="col"><input type="text" placeholder="${server_name}"></th>
      <th scope="col"><input type="text" placeholder="${cluster_name}"></th>
    </tr>
  </thead>
  <tbody>
<c:forEach var="project" items="${projectItems}">
<tr>
<c:choose>
<c:when test="${menuSecurity[RMToolsContext.APPLICATION][MenuAccess.APPLICATION_READONLY_NONPROD] != true && menuSecurity[RMToolsContext.APPLICATION][MenuAccess.APPLICATION_READONLY_PROD] != true}">
<td style="text-align: center; vertical-align: middle;"><a href="javascript: loadEntityToEdit('/editWebsphereProject', '${project.project}')"><span class="glyphicon glyphicon-pencil edit"></span></a></td>
<td style="text-align: center; vertical-align: middle;"><a href="#" id="iconDeleteWebsphereProj" data-name="${project.name}" data-id="${project.project}" title="Delete Project"><span class="glyphicon glyphicon-remove delete"></span></a></td>
</c:when>
<c:otherwise>
<td style="text-align: center; vertical-align: middle;"><span class="glyphicon glyphicon-ban-circle"></span></td>
<td style="text-align: center; vertical-align: middle;"><span class="glyphicon glyphicon-ban-circle"></span></td>
</c:otherwise>
</c:choose>
<td>${project.name} <a href="javascript: loadModalDetails('/displayWebsphereProjectDetails/${project.project}', '#detailsModal', '${prjDetailsTitle}', '#detailsModalEditAction', '/editWebsphereProject', '#detailsModalEditValue', '${project.project}')"><span class="glyphicon glyphicon-info-sign" style="font-size: 14px; float: right;"/></a></td>			
<td>${project.appserver}</td>
<td>${project.appcluster}</td>
</tr>
</c:forEach>
  </tbody>
  <tfoot>
       <tr>
           <th colspan="2"></th>
           <th><input type="text" placeholder="${prj_name}"></th>
           <th><input type="text" placeholder="${server_name}"></th>
           <th><input type="text" placeholder="${cluster_name}"></th>
       </tr>
   </tfoot>
</table>

<div class="modal fade" id="deleteWebsphereProjectModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">        
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="modalTitle"><spring:message code='project.delete.title'/></h4>
      </div>
      <div class="modal-body"> 
        <spring:message code='project.delete.confirm'/>: <span style="font-weight:600;" id="websphereModalProjId"></span>       
      </div>
      <div class="modal-footer">
        <button type="button" id="deleteWebsphereProjectCancel" class="btn btn-secondary" data-dismiss="modal"><spring:message code='button.cancel'/></button>
        <button type="button" id="deleteWebsphereProjectProceed" class="btn btn-primary"><spring:message code='global.proceed'/></button>
      </div>
    </div>
  </div>
</div>

 <div class="modal fade" id="detailsModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document" style="width: 700px;">
    <div class="modal-content">
      <div class="modal-header">        
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="modalTitle" ></h4>
      </div>
      
      	<div class="modal-body"></div>
      
      <div class="modal-footer">
      	<input type="hidden" id="detailsModalEditAction" value="">
      	<input type="hidden" id="detailsModalEditValue" value="">
      	<button type="button" class="btn btn-secondary" data-dismiss="modal"><spring:message code='button.close'/></button>
      	<button type="button" class="btn btn-secondary" data-dismiss="modal"  onclick="$('#detailsModal').modal('hide'); $('.modal-backdrop').remove(); loadEntityToEdit($('input#detailsModalEditAction').val(), $('input#detailsModalEditValue').val());"><spring:message code='button.edit'/></button>        
      </div>
    </div>
  </div>
</div> 

</div>
